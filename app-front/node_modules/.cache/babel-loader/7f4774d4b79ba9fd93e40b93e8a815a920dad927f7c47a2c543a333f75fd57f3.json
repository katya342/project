{"ast":null,"code":"import{useState,useEffect}from\"react\";import api from\"../../api\";import{useLocation,useNavigate,useParams}from\"react-router-dom\";import{BASE_URL}from\"../constants\";import styles from\"./PlansComp.module.css\";import FeedBack from\"./FeedBack\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const PlansComp=()=>{const[info,setInfo]=useState(null);const{planId}=useParams();const[errorData,setErrorData]=useState(\"\");const[showModal,setShowModal]=useState(false);const location=useLocation();const navigate=useNavigate();const{planData}=location.state;useEffect(()=>{const fetchData=async()=>{try{const response=await api.get(\"plan-info/\".concat(planId));const{trainer}=response.data;console.log(planData);setInfo(trainer);}catch(error){console.error('Error fetching plan info:',error);}};fetchData();},[planId]);const handleModalClose=()=>{setShowModal(false);};const handleSubscribe=()=>{if(planId){api.post(\"/user/add-subscription/\".concat(planId)).then(response=>{setErrorData(\"Successfully subscribed to this plan\");setShowModal(true);navigate('/home');}).catch(error=>{if(error.response.status==401){console.log(localStorage.getItem(\"user_token\"));// console.log(error.response.data.message);\nsetErrorData(error.response.data.message);setShowModal(true);}else{setShowModal(true);setErrorData(error.response.data.error);console.log(localStorage.getItem(\"user_token\"));// console.log(error.response.data);\n}});}};if(!info){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:styles.container,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.planInfo,children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Information about chosen plan\"}),/*#__PURE__*/_jsx(\"p\",{children:planData.name}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Price: \",planData.price,\"$\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Duration: \",planData.duration_months,\" months\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.trainersInfo,children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Trainer that available on this plan\"}),/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(BASE_URL).concat(info.image_path),alt:\"Cannot display image\",width:200}),/*#__PURE__*/_jsx(\"p\",{children:info.description}),/*#__PURE__*/_jsxs(\"p\",{children:[info.year_exp,\" years of experience\"]}),/*#__PURE__*/_jsxs(\"blockquote\",{class:\"blockquote text-center\",children:[/*#__PURE__*/_jsx(\"p\",{class:\"mb-3\",children:info.quote}),/*#__PURE__*/_jsxs(\"footer\",{class:\"blockquote-footer\",children:[info.name,\" \",info.surname]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>handleSubscribe(),children:\"Subscribe\"})]}),/*#__PURE__*/_jsx(\"p\",{children:\"Users comments subscribed to this plan\"}),/*#__PURE__*/_jsx(FeedBack,{planId:planId,trainerId:planData.trainer_id})]})});};export default PlansComp;","map":{"version":3,"names":["useState","useEffect","api","useLocation","useNavigate","useParams","BASE_URL","styles","FeedBack","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","PlansComp","info","setInfo","planId","errorData","setErrorData","showModal","setShowModal","location","navigate","planData","state","fetchData","response","get","concat","trainer","data","console","log","error","handleModalClose","handleSubscribe","post","then","catch","status","localStorage","getItem","message","children","className","container","planInfo","name","price","duration_months","trainersInfo","src","image_path","alt","width","description","year_exp","class","quote","surname","onClick","trainerId","trainer_id"],"sources":["C:/Proggramming/app-front/src/components/subscriptions/PlansComp.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport api from \"../../api\";\r\nimport { useLocation, useNavigate, useParams } from \"react-router-dom\";\r\nimport { BASE_URL } from \"../constants\";\r\nimport styles from \"./PlansComp.module.css\";\r\nimport FeedBack from \"./FeedBack\";\r\n\r\nconst PlansComp = () => {\r\n    const [info, setInfo] = useState(null);\r\n    const { planId } = useParams();\r\n    const [errorData, setErrorData] = useState(\"\");\r\n    const [showModal, setShowModal] = useState(false);\r\n    const location = useLocation();\r\n    const navigate = useNavigate();\r\n    const { planData } = location.state;\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            try {\r\n\r\n                const response = await api.get(`plan-info/${planId}`);\r\n                const { trainer } = response.data;\r\n                console.log(planData);\r\n                setInfo(trainer);\r\n            } catch (error) {\r\n                console.error('Error fetching plan info:', error);\r\n            }\r\n        };\r\n\r\n        fetchData();\r\n    }, [planId]);\r\n    \r\n\r\n    \r\n    const handleModalClose = () => {\r\n        setShowModal(false);\r\n    }\r\n    \r\n    const handleSubscribe = () => {\r\n\r\n        if (planId) {\r\n            api.post(`/user/add-subscription/${planId}`)\r\n                .then(response => {\r\n                    setErrorData(\"Successfully subscribed to this plan\");\r\n                    setShowModal(true);\r\n                    navigate('/home');\r\n\r\n                })\r\n                .catch(error => {\r\n                    if (error.response.status == 401) {\r\n                        console.log(localStorage.getItem(\"user_token\"));\r\n                        // console.log(error.response.data.message);\r\n                        setErrorData(error.response.data.message);\r\n                        setShowModal(true);\r\n                    }\r\n                    else {\r\n                        setShowModal(true);\r\n                        setErrorData(error.response.data.error);\r\n                        console.log(localStorage.getItem(\"user_token\"));\r\n                        // console.log(error.response.data);\r\n\r\n                    }\r\n\r\n                });\r\n        }\r\n    }\r\n    if (!info) {\r\n        return <div>Loading...</div>;\r\n    }\r\n    return (\r\n        <>\r\n            <div className={styles.container}>\r\n                <div className={styles.planInfo}>\r\n                    <h5>Information about chosen plan</h5>\r\n                    <p>{planData.name}</p>\r\n                    <p>Price: {planData.price}$</p>\r\n                    <p>Duration: {planData.duration_months} months</p>\r\n                </div>\r\n\r\n                <div className={styles.trainersInfo}>\r\n                    <h5>Trainer that available on this plan</h5>\r\n                    <img src={`${BASE_URL}${info.image_path}`} alt=\"Cannot display image\" width={200}></img>\r\n\r\n                    <p>{info.description}</p>\r\n                    <p>{info.year_exp} years of experience</p>\r\n                    <blockquote class=\"blockquote text-center\">\r\n                        <p class=\"mb-3\">{info.quote}</p>\r\n                        <footer class=\"blockquote-footer\">{info.name} {info.surname}</footer>\r\n                    </blockquote>\r\n\r\n\r\n                    <button className=\"btn btn-primary\" onClick={() => handleSubscribe()}>Subscribe</button>\r\n\r\n                </div>\r\n                <p>Users comments subscribed to this plan</p>\r\n                <FeedBack planId={planId} trainerId={planData.trainer_id} />\r\n\r\n            </div>\r\n            {/* <Modal show={showModal} onHide={handleModalClose}>\r\n                <Modal.Header closeButton>\r\n                    \r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <p>User {errorData}</p>\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button variant=\"primary\" onClick={handleModalClose}>\r\n                        Close\r\n                    </Button>\r\n                </Modal.Footer>\r\n            </Modal> */}\r\n\r\n        </>\r\n    );\r\n}\r\n\r\n\r\n\r\n\r\nexport default PlansComp;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}