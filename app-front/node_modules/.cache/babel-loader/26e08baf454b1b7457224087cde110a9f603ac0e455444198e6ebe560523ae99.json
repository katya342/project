{"ast":null,"code":"import React,{useState}from'react';import api from'../../api';import{useNavigate}from\"react-router-dom\";import styles from\"./UserRegistration.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const UserRegistration=()=>{const[formData,setFormData]=useState({name:'',email:'',password:'',avatar:null});const[showModal,setShowModal]=useState(false);const navigate=useNavigate();const handleChange=e=>{if(e.target.name==='avatar'){setFormData({...formData,avatar:e.target.files[0]});}else{setFormData({...formData,[e.target.name]:e.target.value});}};const handleModalClose=()=>{setShowModal(false);navigate('/home');};const handleSubmit=async e=>{e.preventDefault();try{const formDataToSend=new FormData();formDataToSend.append('name',formData.name);formDataToSend.append('email',formData.email);formDataToSend.append('password',formData.password);formDataToSend.append('avatar',formData.avatar);const response=await api.post('/register',formDataToSend,{headers:{'Content-Type':'multipart/form-data'}});const{token}=response.data;localStorage.setItem('user_token',token);localStorage.setItem('notifyState','true');setShowModal(true);}catch(error){console.error('Registration error:',error.response.data.message);}};return/*#__PURE__*/_jsx(\"div\",{className:styles.main,children:/*#__PURE__*/_jsx(\"div\",{className:styles.container,children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Create your own account\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",className:\"form-label\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:formData.name,onChange:handleChange,className:\"form-control\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"form-label\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",value:formData.email,onChange:handleChange,className:\"form-control\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"form-label\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",value:formData.password,onChange:handleChange,className:\"form-control\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"avatar\",className:\"form-label\",children:\"Avatar\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"avatar\",onChange:handleChange,className:\"form-control\",accept:\"image/*\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Create account\"})]})})});};export default UserRegistration;","map":{"version":3,"names":["React","useState","api","useNavigate","styles","jsx","_jsx","jsxs","_jsxs","UserRegistration","formData","setFormData","name","email","password","avatar","showModal","setShowModal","navigate","handleChange","e","target","files","value","handleModalClose","handleSubmit","preventDefault","formDataToSend","FormData","append","response","post","headers","token","data","localStorage","setItem","error","console","message","className","main","children","container","onSubmit","htmlFor","type","onChange","required","accept"],"sources":["C:/Proggramming/app-front/src/components/Registration&Authentication/UserRegistration.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport api from '../../api';\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport styles from \"./UserRegistration.module.css\";\r\n\r\nconst UserRegistration = () => {\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    email: '',\r\n    password: '',\r\n    avatar: null,\r\n  });\r\n\r\n  const [showModal, setShowModal] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  const handleChange = (e) => {\r\n    if (e.target.name === 'avatar') {\r\n      setFormData({ ...formData, avatar: e.target.files[0] });\r\n    } else {\r\n      setFormData({ ...formData, [e.target.name]: e.target.value });\r\n    }\r\n  };\r\n\r\n  const handleModalClose = () => {\r\n    setShowModal(false);\r\n    navigate('/home');\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      const formDataToSend = new FormData();\r\n      formDataToSend.append('name', formData.name);\r\n      formDataToSend.append('email', formData.email);\r\n      formDataToSend.append('password', formData.password);\r\n      formDataToSend.append('avatar', formData.avatar);\r\n\r\n      const response = await api.post('/register', formDataToSend, {\r\n        headers: { 'Content-Type': 'multipart/form-data' },\r\n      });\r\n      \r\n      const { token } = response.data;\r\n      localStorage.setItem('user_token', token);\r\n      localStorage.setItem('notifyState', 'true');\r\n      \r\n      setShowModal(true);\r\n    } catch (error) {\r\n      console.error('Registration error:', error.response.data.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styles.main}>\r\n      <div className={styles.container}>\r\n        <form onSubmit={handleSubmit}>\r\n          <h4>Create your own account</h4>\r\n          <div className=\"mb-3\">\r\n            <label htmlFor=\"name\" className=\"form-label\">Name</label>\r\n            <input type=\"text\" name=\"name\" value={formData.name} onChange={handleChange} className=\"form-control\" required />\r\n          </div>\r\n\r\n          <div className=\"mb-3\">\r\n            <label htmlFor=\"email\" className=\"form-label\">Email</label>\r\n            <input type=\"email\" name=\"email\" value={formData.email} onChange={handleChange} className=\"form-control\" required />\r\n          </div>\r\n\r\n          <div className=\"mb-3\">\r\n            <label htmlFor=\"password\" className=\"form-label\">Password</label>\r\n            <input type=\"password\" name=\"password\" value={formData.password} onChange={handleChange} className=\"form-control\" required />\r\n          </div>\r\n\r\n          <div className=\"mb-3\">\r\n            <label htmlFor=\"avatar\" className=\"form-label\">Avatar</label>\r\n            <input type=\"file\" name=\"avatar\" onChange={handleChange} className=\"form-control\" accept=\"image/*\" />\r\n          </div>\r\n\r\n          <button type=\"submit\" className='btn btn-primary'>\r\n            Create account\r\n          </button>\r\n        </form>\r\n      </div>\r\n\r\n      {/* <Modal show={showModal} onHide={handleModalClose}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Registration Successful</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <p>Your registration was successful.</p>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"primary\" onClick={handleModalClose}>\r\n            Close\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal> */}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserRegistration;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}